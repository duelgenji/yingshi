<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
    <title>友谊的小船</title>
    <link rel="shortcut icon" href="public/img/favicon.ico">
    <link rel="stylesheet" href="public/css/bootstrap.min.css">
    <link rel="stylesheet" href="public/css/boat_upload.css">
</head>
<body>
<div class="container">

    <div class="boat-title">
        <img src="public/img/boat/boat_title.png"/>
    </div>

    <div class="card-container-two-background">

        <div class="card-container-two">
            <div class="btn-img-add">
            </div>
            <div class="btn-img-add1">
            </div>
            <div id="plan">
                <canvas id="myCanvas"></canvas>
            </div>
            <div id="plan1">
                <canvas id="myCanvas1"></canvas>
            </div>
            <img id="upload-btn" class="add" src="http://o84r72kbf.bkt.clouddn.com/boat/20160606161311587">
            <img id="upload-baby" class="add-baby" src="http://o84r72kbf.bkt.clouddn.com/boat/20160606161311723">
            <div class="card-back"><img src="public/img/boat/boat_upload2.png"></div>
        </div>


    </div>

    <div class="boat-content">
        <p>没想到你是这种霍霍</p>
        <p>快快送我一辆<span class="boat-content-red">&lt;兰博基尼&gt;</span></p>
        <p>OR发我<span class="boat-content-red">&lt;5.20&gt;</span>的红包!</p>
        <p>我们还能在一起!</p>
        <p>现在 看你咯</p>
    </div>


    <div class="button-content">
        <div class="btn-img" id="rescue">
            <img src="public/img/boat/btn_rescue.png">
        </div>
        <div class="btn-img" id="refuse">
            <img src="public/img/boat/btn_refuse.png">
        </div>
    </div>

    <div class="button-content">
        <div class="btn-content">
            <div class="btn-content-c">
                安迪、大S、尔康等23498人帮忙拯救了友谊小船
            </div>
        </div>
        <div class="btn-content">
            <div class="btn-content-c">
                紫薇、金锁、芈月等83185人残忍掀翻了友谊小船
            </div>
        </div>
    </div>



    <div class="boat-bottom">
        <div id="want_play" class="want-play">
            <span class="want-span">>>> </span><span class="want-play-span">我也要玩</span>
        </div>
    </div>

</div>


<script src="public/js/jquery.min.js"></script>
<script src="public/js/bootstrap.min.js"></script>
<script src="public/js/common.js"></script>

<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script src="public/js/wxconfig.js"></script>
<script src="public/js/hashes.min.js"></script>
<script>


    $(document).ready(function(){

        var openId = GetQueryString("openId");

        $('#rescue').on('click', function () {
            alert("执行拯救动画");
            forward();
        });
        $('#refuse').on('click', function () {
            alert("执行掀翻动画");
            forward();
        });

        $("#want_play").on("click",function(){
            forward();
        });

        function forward(){
            if(openId){
                self.location = "boat_upload.html?openId="+openId;
            }else{
                self.location = "boat_enter.html";
            }
        }

        var current_url = location.href;

        $.ajax({
            url:commonUrl+"wx/getTicket",
            type:"GET",
            success:function(data){
                var SHA1 = new Hashes.SHA1;
                var appId =  "wxa572b73e050e1bb4";
                var timestamp =  parseInt(new Date().getTime()/1000);
                var nonceStr =  createNonceStr();
                var jsapi_ticket = data.token;
                var string = "jsapi_ticket="+jsapi_ticket+"&noncestr="+nonceStr+"&timestamp="+timestamp+"&url="+current_url;
                var signature = SHA1.hex(string);
                wx.config({
                    debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
                    appId: appId, // 必填，公众号的唯一标识
                    timestamp: timestamp , // 必填，生成签名的时间戳
                    nonceStr: nonceStr, // 必填，生成签名的随机串
                    signature: signature,// 必填，签名，见附录1
                    jsApiList: ["onMenuShareTimeline","onMenuShareAppMessage"] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
                });
            }
        });
        wx.ready(function () {

            wx.onMenuShareAppMessage({
                title: '友谊的小船要翻了，赶紧来拯救！', // 分享标题
                link: current_url,
                desc: "友谊的小船说翻就翻，大家都在救，我也要去！",
                imgUrl: 'http://o84r72kbf.bkt.clouddn.com/boat/20160606161311723', // 分享图标
                success: function () {
                }
            });
            wx.onMenuShareTimeline({
                title: '友谊的小船要翻了，赶紧来拯救！', // 分享标题
                link: current_url, // 分享链接
                desc: "友谊的小船说翻就翻，大家都在救，我也要去！",
                imgUrl: 'http://o84r72kbf.bkt.clouddn.com/boat/20160606161311723', // 分享图标
                success: function () {
                    // 用户确认分享后执行的回调函数
                }
            });
        });


    });


</script>
</body>
</html>