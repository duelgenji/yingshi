<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
    <title>友谊的小船</title>
    <link rel="shortcut icon" href="public/img/favicon.ico">
    <link rel="stylesheet" href="public/css/bootstrap.min.css">
    <link rel="stylesheet" href="public/css/boat_upload.css">
</head>
<body>
<div class="container">

    <div class="boat-title">
        <img src="public/img/boat/boat_title.png"/>
    </div>

    <div class="card-container-two-background">

        <div class="card-container-two">
            <div class="btn-img-add">
                <input type="file" id="file" accept="image/*" onchange="clip();">
            </div>
            <div class="btn-img-add1">
                <input type="file" id="file1" accept="image/*" onchange="clip1();">
            </div>
            <div id="plan">
                <canvas id="myCanvas"></canvas>
            </div>
            <div id="plan1">
                <canvas id="myCanvas1"></canvas>
            </div>
            <img id="upload-btn" class="add" src="public/img/boat/boat_avatar.png">
            <img id="upload-baby" class="add-baby" src="public/img/boat/boat_avatar.png ">
            <div class="card-back"><img src="public/img/boat/boat_upload.png"></div>
            <input type="hidden" id="imgUrl" style="opacity: 0;position: fixed;bottom: -100px">
            <input type="hidden" id="imgUrl1" style="opacity: 0;position: fixed;bottom: -100px">
        </div>


    </div>

    <div class="button-content">
        <div class="btn-img" id="rescue">
            <img src="public/img/boat/btn_rescue.png">
        </div>
        <div class="btn-img" id="refuse">
            <img src="public/img/boat/btn_refuse.png">
        </div>
    </div>

    <div class="ys-1v1">
        <a href="http://m.ys1vs1.icoc.in/index.jsp"><img src="public/img/boat/ys1v1.png"/></a>
    </div>
</div>

<!-- Modal -->
<div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-clip" role="document">
        <div class="modal-dialog " role="document" style="width:100%;height: 100%; padding: 0; margin: 0">
            <div id="clipArea" class="center" style="height: 100%"></div>
            <img src="" fileName="" id="hit" style="display:none; z-index: 9">
        </div>
        <div class="clip-button">
            <button type="button" class="btn-lg close-modal" data-dismiss="modal">返回</button>
            <button id="clipBtn" class="btn-lg upload-modal">上传</button>
        </div>
        <div class="clip-message">双指捏合或拖动图片以选取头像</div>
    </div>
</div>

<!-- Modal -->
<div class="modal" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-clip" role="document">
        <div class="modal-dialog " role="document" style="width:100%;height: 100%; padding: 0; margin: 0">
            <div id="clipArea1" class="center" style="height: 100%"></div>
            <img src="" fileName="" id="hit1" style=" display:none; z-index: 9">
        </div>
        <div class="clip-button">
            <button type="button" class="btn-lg close-modal" data-dismiss="modal">返回</button>
            <button id="clipBtn1" class="btn-lg upload-modal">上传</button>
        </div>
        <div class="clip-message">双指捏合或拖动图片以选取头像</div>
    </div>
</div>

<!-- Modal -->
<div class="modal my-model" id="textModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document" style="width: 100%;height: 100%;margin: 0">
        <div class="modal-content center" style="height: 170px;width: 250px;background-color: #afe9dd;border:none;">
            <div class="my-modal-body" id="my-message"
                 style="padding: 30px 10px;text-align: center;font-size: 18px;height: 110px;">
            </div>
            <div class="my-modal-footer">
                <button type="button" class="btn btn-default"
                        style="display: block; margin: 0 99px;border: none;background-color: #f0b600;color:#4f3c00 "
                        data-dismiss="modal">确定
                </button>
            </div>
        </div>
    </div>
</div>


<script src="public/js/jquery.min.js"></script>
<script src="public/js/bootstrap.min.js"></script>
<script src="public/js/sonic.js"></script>
<script src="public/js/hammer.js"></script>
<script src="public/js/iscroll-zoom.js"></script>
<script src="public/js/jquery.photoClip.js"></script>
<script src="public/js/common.js"></script>
<script src="public/js/boat_upload.js"></script>

<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script src="public/js/wxconfig.js"></script>
<script src="public/js/hashes.min.js"></script>
<script>


    $(document).ready(function(){
        var current_url = location.href;

        $.ajax({
            url:"http://172.16.76.19:8080/wx/getTicket",
            type:"GET",
            success:function(data){
                var SHA1 = new Hashes.SHA1;
                var appId =  "wxa572b73e050e1bb4";
                var timestamp =  parseInt(new Date().getTime()/1000);
                var nonceStr =  createNonceStr();
                var jsapi_ticket = data.token;
                var string = "jsapi_ticket="+jsapi_ticket+"&noncestr="+nonceStr+"&timestamp="+timestamp+"&url="+current_url;
                var signature = SHA1.hex(string);
                wx.config({
                    debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
                    appId: appId, // 必填，公众号的唯一标识
                    timestamp: timestamp , // 必填，生成签名的时间戳
                    nonceStr: nonceStr, // 必填，生成签名的随机串
                    signature: signature,// 必填，签名，见附录1
                    jsApiList: ["onMenuShareTimeline","onMenuShareAppMessage"] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
                });
            }
        });
        wx.ready(function () {

            wx.onMenuShareAppMessage({
                title: '自定义标题分享123', // 分享标题
                link: current_url,
                desc: "自定义描述abc",
                imgUrl: 'http://7xi893.com2.z0.glb.clouddn.com/self_20160524170156184', // 分享图标
                success: function () {
                }
            });
            wx.onMenuShareTimeline({
                title: '自定义标题分享123', // 分享标题
                link: current_url, // 分享链接
                desc: "自定义描述abc",
                imgUrl: 'http://7xi893.com2.z0.glb.clouddn.com/self_20160524170156184', // 分享图标
                success: function () {
                    // 用户确认分享后执行的回调函数
                }
            });
        });


    });


</script>
</body>
</html>